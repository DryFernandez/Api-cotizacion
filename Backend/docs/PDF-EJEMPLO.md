# ğŸ“„ Ejemplo de PDF Generado

## Vista Previa del PDF de CotizaciÃ³n

Cuando creas una cotizaciÃ³n usando el endpoint `POST /api/cotizaciones`, el sistema genera automÃ¡ticamente un PDF profesional con el siguiente contenido:

---

### ğŸ¨ DiseÃ±o del PDF

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                  â•‘
â•‘              COTIZACIÃ“N DE VEHÃCULO                              â•‘
â•‘         CAR - Sistema de GestiÃ³n de VehÃ­culos                    â•‘
â•‘                                                                  â•‘
â•‘â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•‘
â•‘                                                                  â•‘
â•‘  COTIZACIÃ“N #: 6          FECHA: 15 de enero de 2024, 10:30    â•‘
â•‘  ESTADO: Pendiente                                               â•‘
â•‘                                                                  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘                                                                  â•‘
â•‘  DATOS DEL CLIENTE                                               â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â•‘
â•‘                                                                  â•‘
â•‘  Nombre:   Carlos GÃ³mez              CÃ©dula:   001-1234567-8    â•‘
â•‘  TelÃ©fono: 809-555-1234              Correo:   carlosgomez@...  â•‘
â•‘  DirecciÃ³n: Av. BolÃ­var #45, Santo Domingo                      â•‘
â•‘                                                                  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘                                                                  â•‘
â•‘  DATOS DEL VEHÃCULO                                              â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â•‘
â•‘                                                                  â•‘
â•‘  Marca:        Hyundai          Tipo:           Jeepeta         â•‘
â•‘  Modelo:       Tucson           TransmisiÃ³n:    AutomÃ¡tica      â•‘
â•‘  AÃ±o:          2020             Combustible:    Gasolina        â•‘
â•‘  Color:        Gris             Kilometraje:    35,000 km       â•‘
â•‘                                                                  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘                                                                  â•‘
â•‘  DETALLES DE PRECIO                                              â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â•‘
â•‘                                                                  â•‘
â•‘  Precio del VehÃ­culo:                          RD$ 1,850,000.00 â•‘
â•‘  Precio Ofrecido:                              RD$ 1,800,000.00 â•‘
â•‘  Descuento:                       RD$ 50,000.00 (2.70%)         â•‘
â•‘                                                                  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘                                                                  â•‘
â•‘  OBSERVACIONES                                                   â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                  â•‘
â•‘                                                                  â•‘
â•‘  Cliente desea financiamiento a 12 meses con inicial del 30%.   â•‘
â•‘  Se incluirÃ¡ seguro completo en el financiamiento.               â•‘
â•‘                                                                  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘                                                                  â•‘
â•‘                                                                  â•‘
â•‘     Esta cotizaciÃ³n tiene una validez de 15 dÃ­as a partir        â•‘
â•‘            de la fecha de emisiÃ³n.                               â•‘
â•‘       Para mÃ¡s informaciÃ³n, contacte a nuestro equipo            â•‘
â•‘                    de ventas.                                    â•‘
â•‘                                                                  â•‘
â•‘         Â© 2024 CAR - Sistema de GestiÃ³n de VehÃ­culos            â•‘
â•‘                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ¨ CaracterÃ­sticas del PDF

### Colores y DiseÃ±o

- **Encabezado**: Azul oscuro (#2c3e50)
- **Estado Pendiente**: Naranja (#f39c12)
- **Estado Aprobada**: Verde (#27ae60)
- **Estado Rechazada**: Rojo (#e74c3c)
- **Precio Ofrecido**: Azul (#2980b9)
- **Descuento**: Verde (#27ae60)

### Secciones

1. **Encabezado**
   - TÃ­tulo principal: "COTIZACIÃ“N DE VEHÃCULO"
   - SubtÃ­tulo: "CAR - Sistema de GestiÃ³n de VehÃ­culos"
   - LÃ­nea divisoria azul

2. **InformaciÃ³n de la CotizaciÃ³n**
   - NÃºmero de cotizaciÃ³n
   - Fecha y hora de emisiÃ³n
   - Estado (Pendiente/Aprobada/Rechazada)

3. **Datos del Cliente**
   - Nombre completo
   - CÃ©dula de identidad
   - TelÃ©fono de contacto
   - Correo electrÃ³nico
   - DirecciÃ³n completa

4. **Datos del VehÃ­culo**
   - Marca y modelo
   - AÃ±o de fabricaciÃ³n
   - Color
   - Tipo de vehÃ­culo
   - Tipo de transmisiÃ³n
   - Tipo de combustible
   - Kilometraje

5. **Detalles de Precio**
   - Precio original del vehÃ­culo
   - Precio ofrecido por el cliente
   - Descuento calculado (en pesos y porcentaje)

6. **Observaciones**
   - Notas adicionales del vendedor
   - Condiciones especiales
   - Solicitudes del cliente

7. **Pie de PÃ¡gina**
   - Validez de la cotizaciÃ³n
   - InformaciÃ³n de contacto
   - Copyright

---

## ğŸ“ Especificaciones TÃ©cnicas

- **TamaÃ±o**: Letter (8.5" x 11")
- **MÃ¡rgenes**: 50 puntos en todos los lados
- **Fuentes**:
  - TÃ­tulos: Helvetica-Bold
  - Texto normal: Helvetica
  - Texto cursiva: Helvetica-Oblique
- **TamaÃ±os de fuente**:
  - TÃ­tulo principal: 24pt
  - Secciones: 14pt
  - Texto normal: 10-11pt
  - Pie de pÃ¡gina: 8-9pt

---

## ğŸ’¾ Formatos de Entrega

### 1. Base64 (en respuesta JSON)

Al crear una cotizaciÃ³n, recibes el PDF en formato base64:

```json
{
  "success": true,
  "data": {
    "id_cotizacion": 6,
    "pdf": {
      "base64": "JVBERi0xLjMKJf////8KOCAwIG9iag...",
      "nombre_archivo": "cotizacion_6_1699725600000.pdf"
    }
  }
}
```

### 2. Descarga Directa

Usando el endpoint `/api/cotizaciones/:id/pdf`:

- **Content-Type**: application/pdf
- **Content-Disposition**: attachment; filename=cotizacion_6.pdf
- **Formato**: Archivo PDF binario listo para descargar

---

## ğŸ”„ Ejemplo de Uso en el Frontend

### HTML + JavaScript (Descarga AutomÃ¡tica)

```html
<!DOCTYPE html>
<html>
<head>
    <title>Generar CotizaciÃ³n</title>
</head>
<body>
    <button onclick="generarCotizacion()">Generar CotizaciÃ³n PDF</button>
    
    <script>
        async function generarCotizacion() {
            const response = await fetch('http://localhost:3000/api/cotizaciones', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    id_cliente: 1,
                    id_vehiculo: 2,
                    precio_ofrecido: 1800000,
                    observaciones: 'Cliente desea financiamiento'
                })
            });
            
            const data = await response.json();
            
            // Descargar PDF
            const link = document.createElement('a');
            link.href = `data:application/pdf;base64,${data.data.pdf.base64}`;
            link.download = data.data.pdf.nombre_archivo;
            link.click();
            
            alert('PDF generado y descargado exitosamente!');
        }
    </script>
</body>
</html>
```

### React (VisualizaciÃ³n en Iframe)

```jsx
import React, { useState } from 'react';

function CotizacionPDF() {
    const [pdfBase64, setPdfBase64] = useState('');

    const generarCotizacion = async () => {
        const response = await fetch('http://localhost:3000/api/cotizaciones', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                id_cliente: 1,
                id_vehiculo: 2,
                precio_ofrecido: 1800000,
                observaciones: 'Cliente desea financiamiento'
            })
        });
        
        const data = await response.json();
        setPdfBase64(data.data.pdf.base64);
    };

    return (
        <div>
            <button onClick={generarCotizacion}>
                Generar CotizaciÃ³n PDF
            </button>
            
            {pdfBase64 && (
                <iframe
                    src={`data:application/pdf;base64,${pdfBase64}`}
                    width="100%"
                    height="600px"
                    title="CotizaciÃ³n PDF"
                />
            )}
        </div>
    );
}

export default CotizacionPDF;
```

---

## ğŸ“± Vista MÃ³vil

El PDF es responsive y se adapta bien a diferentes dispositivos:

- âœ… Visualizable en navegadores mÃ³viles
- âœ… Descargable en smartphones
- âœ… Compatible con lectores de PDF nativos
- âœ… Texto seleccionable y copiable
- âœ… Imprimible con calidad profesional

---

## ğŸ–¨ï¸ Calidad de ImpresiÃ³n

El PDF estÃ¡ optimizado para impresiÃ³n:

- **ResoluciÃ³n**: Vector-based (escalable sin pÃ©rdida)
- **TamaÃ±o de archivo**: ~15-30 KB (muy ligero)
- **Compatibilidad**: PDF 1.3 (compatible con todos los lectores)
- **ImpresiÃ³n**: TamaÃ±o carta (Letter) estÃ¡ndar

---

## ğŸ¯ Casos de Uso

### 1. EnvÃ­o por Correo ElectrÃ³nico

```javascript
// Ejemplo con Nodemailer (a implementar)
const nodemailer = require('nodemailer');

async function enviarCotizacionPorCorreo(cotizacion, pdfBase64) {
    const transporter = nodemailer.createTransport({...});
    
    await transporter.sendMail({
        to: cotizacion.cliente_correo,
        subject: `CotizaciÃ³n #${cotizacion.id_cotizacion}`,
        text: 'Adjunto encontrarÃ¡ su cotizaciÃ³n',
        attachments: [{
            filename: `cotizacion_${cotizacion.id_cotizacion}.pdf`,
            content: pdfBase64,
            encoding: 'base64'
        }]
    });
}
```

### 2. Almacenamiento en Servidor

```javascript
const fs = require('fs').promises;

async function guardarPDF(pdfBuffer, id_cotizacion) {
    const filename = `cotizacion_${id_cotizacion}.pdf`;
    await fs.writeFile(`./pdfs/${filename}`, pdfBuffer);
    return filename;
}
```

### 3. Subida a Cloud Storage

```javascript
// Ejemplo con AWS S3 (a implementar)
const AWS = require('aws-sdk');

async function subirPDFaS3(pdfBuffer, id_cotizacion) {
    const s3 = new AWS.S3();
    
    await s3.putObject({
        Bucket: 'cotizaciones',
        Key: `cotizacion_${id_cotizacion}.pdf`,
        Body: pdfBuffer,
        ContentType: 'application/pdf'
    }).promise();
}
```

---

**Â¡El PDF se ve profesional y estÃ¡ listo para enviar a tus clientes! ğŸ‰**
